<!DOCTYPE html>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
  }
  .image-container {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .image {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }

  .a {
    background-image: url(a.jpeg);
  }

  .b {
    background-image: url(b.jpeg);
    height: 50%;
  }

  .slider {
    position: absolute;
    width: 100%;
    height: 150px;
    background-color: brown;
  }
</style>
<div class="image-container">
  <div class="image a"></div>
  <div class="image b"></div>
  <div class="slider"></div>
</div>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
  var Slider = function(element) {
    this.$element = $(element)
    this.anchorY = null
    this.touchY = null
    this.options = {
      minPos: 0,
      maxPos: this.$element.parent().height() - this.$element.height()
    }
    this.position = this.options.maxPos / 2
    this.init()
  }

  Slider.prototype.init = function() {
    this.$element.on('touchstart', $.proxy(this.onTouchStart, this))
    this.$element.on('touchmove', $.proxy(this.onTouchMove, this))
    this.draw()
  }

  Slider.prototype.onTouchStart = function(e) {
    var firstTouch = e.originalEvent.touches[0]

    this.anchorY = this.touchY = firstTouch.clientY
  }

  Slider.prototype.onTouchMove = function(e) {
    var firstTouch = e.originalEvent.touches[0]

    this.touchY = firstTouch.clientY
    requireRender()
  }

  Slider.prototype.update = function() {
    var diff, height, delta
    if (!this.touchY || !this.anchorY) return false
    diff = this.touchY - this.anchorY
    if (Math.abs(diff) < 1) {
      this.touchY = null
      return false
    }
    delta = diff * 0.2
    this.anchorY = this.anchorY + delta
    position = this.position
    position += delta
    position = position > this.options.maxPos ? this.options.maxPos : position
    position = position < this.options.minPos ? this.options.minPos : position
    this.position = position
  }

  Slider.prototype.draw = function() {
    this.update()
    this.$element.css({ top: this.position })
    $('.b').height(this.position + 1)
    requireRender()
  }

  var slider = new Slider($('.slider')[0])
  var renderRequired = false

  function requireRender() {
    if (renderRequired) return
    renderRequired = true
    window.requestAnimationFrame(render)
  }

  function render() {
    renderRequired = false
    slider.draw()
  }
</script>
